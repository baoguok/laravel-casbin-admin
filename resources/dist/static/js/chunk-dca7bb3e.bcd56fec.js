(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dca7bb3e"],{"0f69":function(e,t,n){"use strict";n.r(t);var i=n("a9a6"),a=n("81d6");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var r=n("2877"),l=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"3abd8212",null);t["default"]=l.exports},"333d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[n("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},a=[];n("a9e3");Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var i=l(),a=e-i,s=20,u=0;t="undefined"===typeof t?500:t;var d=function e(){u+=s;var l=Math.easeInOutQuad(u,i,a,t);r(l),u<t?o(e):n&&"function"===typeof n&&n()};d()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[20]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},d=u,c=(n("f4d0"),n("2877")),f=Object(c["a"])(d,i,a,!1,null,"18100e3c",null);t["default"]=f.exports},3786:function(e,t,n){"use strict";var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.addUser=o,t.getPermissionList=r,t.getAllPermissions=l,t.getUserList=s,t.addPermissions=u,t.updatePermissions=d,t.delPermissions=c,t.updateUser=f,t.getLogList=m,t.delLog=p;var a=i(n("b775"));function o(e){return(0,a.default)({url:"/admin/users",method:"post",data:e})}function r(e){return(0,a.default)({url:"/admin/permissions",method:"get",data:{id:e}})}function l(){return(0,a.default)({url:"/admin/all_permissions",method:"get"})}function s(e){return(0,a.default)({url:"/admin/users",method:"get",params:e})}function u(e){return(0,a.default)({url:"/admin/permissions",method:"post",data:e})}function d(e){return(0,a.default)({url:"/admin/permissions/"+e.id,method:"put",data:e})}function c(e){return(0,a.default)({url:"/admin/permissions/"+e,method:"delete"})}function f(e){return(0,a.default)({url:"/admin/users/"+e.id,method:"put",data:e})}function m(e){return(0,a.default)({url:"/admin/log",method:"get",params:e})}function p(e){return(0,a.default)({url:"/admin/log/"+e,method:"delete"})}},"3b87":function(e,t,n){"use strict";n.r(t);n("4de4"),n("b0c0"),n("d3b7");var i=n("53ca");t["default"]={data:function(){return{total:100,listLoading:!0,listQuery:{page:1,pageSize:2,importance:void 0,title:void 0,type:void 0,sort:"+id"},name:void 0,content:"222",dialogHtmlVisible:!1,header:void 0}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},resetForm:function(){this.filter=this.$options.data().filter,this.getList()},filterEmpty:function(e){for(var t in e){var n=e[t],a=Object(i["a"])(n),o="undefined"==a||null==a;(o||0==n.length)&&delete e[t]}return e},validateForm:function(e){var t=this;return new Promise((function(n,i){t.$refs[e].validate((function(e){e?n(!0):i()}))}))},setInput:function(e){this.form[e]=this.$refs.editorForm.getHtml()},showHtml:function(e,t){this.name=e,this.content=t,this.dialogHtmlVisible=!0},confirmOk:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"是否确认",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示";return new Promise((function(i,a){e.$confirm(t,n,{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){i()})).catch((function(){a()}))}))},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;this.$message({type:t,message:e,duration:n})},errMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3;this.$message({type:t,message:e,duration:n})},reloadUrl:function(){history.go(0)}}}},"3c18":function(e,t,n){},"81d6":function(e,t,n){"use strict";n.r(t);var i=n("8507"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},8507:function(e,t,n){"use strict";var i=n("4ea4");n("4de4"),n("b0c0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var a=i(n("c973")),o=i(n("3b87")),r=i(n("333d")),l=n("3786"),s=n("cc5e"),u={name:"UserPermission",components:{Pagination:r.default},mixins:[o.default],data:function(){return{list:[],mate:[],listLoading:!1,page:void 0,form:{id:void 0,name:null,email:null,avatar:null,password:void 0,password_confirmation:void 0,roles:[]},dialogVisible:!1,title:void 0,allRole:[{id:0,name:"无权限"}],filter:{email:void 0,name:void 0}}},methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},getList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.listLoading=!0,t=Object.assign(t,this.filter),(0,l.getUserList)(t).then((function(t){var n=t.data,i=n.list,a=n.mate;e.list=i,e.total=a.total,e.page=a.page,e.pageSize=a.pageSize})),this.listLoading=!1},getAllRole:function(){var e=this;(0,s.allRole)().then((function(t){var n=t.data;e.allRole=n}))},add:function(){this.getAllRole(),this.title="添加用户",this.dialogVisible=!0},submit:function(){var e=this;void 0!=this.form.id?(0,l.updateUser)(this.form).then((function(t){e.$message.success(t.message),e.getList(),e.dialogVisible=!1})):(0,l.addUser)(this.form).then((function(t){200==t.code&&(e.$message({type:"success",message:t.message,duration:5e3}),e.getList(),e.dialogVisible=!1)}))},edit:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getAllRole();case 2:t.form=Object.assign(e,{name:e.name,roles:e.roles_node,id:e.id}),console.log(e.roles_node),t.title="编辑用户 | "+e.name,t.dialogVisible=!0;case 6:case"end":return n.stop()}}),n)})))()},search:function(){this.getList()},resetForm:function(){this.filter=[],this.getList()},del:function(e){return(0,a.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getList()}};t.default=u},a9a6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-form",{attrs:{model:e.filter,inline:!0}},[n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:"",clearable:""},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}},[n("template",{slot:"prepend"},[e._v("Eamil")])],2)],1),n("el-form-item",{attrs:{label:""}},[n("el-input",{attrs:{placeholder:""},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}},[n("template",{slot:"prepend"},[e._v("用户名称")])],2)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}}),n("el-button",{attrs:{type:"dange",icon:"el-icon-refresh"},on:{click:e.resetForm}}),n("el-button",{attrs:{type:"success",plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}})],1)],1)],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"content-container"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"","row-key":"id"}},[n("el-table-column",{attrs:{prop:"name",label:"用户名"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.email))])]}}])}),n("el-table-column",{attrs:{prop:"roles",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return e._l(i.roles_node,(function(t){return n("el-tag",{staticStyle:{margin:"0px 2px 0px 2px"}},[e._v(" "+e._s(t.name)+" ")])}))}}])}),n("el-table-column",{attrs:{prop:"created_at",label:"添加时间"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("span",[e._v(e._s(i.created_at))])]}}])}),n("el-table-column",{attrs:{label:"method",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:function(t){return e.edit(i)}}})]}}])})],1)],1),n("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"editForm",attrs:{model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户名称: ",required:!0,prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"用户邮箱: ",required:!0,prop:"email"}},[n("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),n("el-form-item",{attrs:{label:"密码: ",prop:"password",required:!0}},[n("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),n("el-form-item",{attrs:{label:"确认密码: ",prop:"password",required:!0}},[n("el-input",{attrs:{type:"password"},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}})],1),n("el-form-item",{attrs:{label:"赋予角色",prop:"roles[]"}},[n("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择角色","value-key":"name"},model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}},e._l(e.allRole,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e}})})),1)],1),n("el-form-item",[n("el-button",{staticClass:"btn-success",on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,pageSize:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:pageSize":function(t){return e.$set(e.listQuery,"pageSize",t)},"update:page-size":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.getList}})],1)},a=[]},cc5e:function(e,t,n){"use strict";n.r(t),n.d(t,"getRoutes",(function(){return o})),n.d(t,"getRoles",(function(){return r})),n.d(t,"addRole",(function(){return l})),n.d(t,"updateRole",(function(){return s})),n.d(t,"deleteRole",(function(){return u})),n.d(t,"allRole",(function(){return d}));var i=n("b775"),a=n.n(i);function o(){return a()({url:"/vue-element-admin/routes",method:"get"})}function r(){return a()({url:"/admin/roles",method:"get"})}function l(e){return a()({url:"/admin/roles",method:"post",data:e})}function s(e){return a()({url:"/admin/roles/".concat(e.id),method:"put",data:e})}function u(e){return a()({url:"/admin/roles/".concat(e),method:"delete"})}function d(){return a()({url:"/admin/all_role",method:"get"})}},f4d0:function(e,t,n){"use strict";var i=n("3c18"),a=n.n(i);a.a}}]);